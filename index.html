<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kanji Snap</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b1220">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <div class="wrap">
    <div class="card">
      <header class="header">
        <div>
          <div class="title">Kanji Snap</div>
        </div>

        <nav class="tabs" role="tablist" aria-label="Main tabs">
          <button class="tab active" id="tabHome" type="button">Home</button>
          <button class="tab" id="tabSettings" type="button">Settings</button>
          <button class="tab" id="tabDictionary" type="button">Dictionary</button>
          <button class="tab" id="tabKanji" type="button">Kanji</button>
          <button class="tab" id="tabGame" type="button" style="display:none;">Game</button>
          <button class="tab" id="tabDebug" type="button">Debug</button>
        </nav>
      </header>

      <!-- HOME -->
      <section class="view active" id="viewHome" aria-labelledby="tabHome">
        <div class="row">
          <div class="pill" id="homePill">Active: …</div>
          <button class="btn" id="startBtn" type="button">Start game</button>
        </div>

        <div class="sectionTitle">Game rules</div>
        <div class="muted">
          Start with <b>10 lives</b>. Wrong answer: <b>-3 lives</b>. Sneak Peek: <b>-1 life</b> (charged once per question).
          <br>
          Some questions can be <b>compound</b> questions (word in hiragana). You must select <b>two kanji</b>.
          First pick turns <b>blue</b> (selection). Second pick reveals correct (green) and incorrect (red).
        </div>

        <div class="sectionTitle">Dictionary</div>
        <div class="muted">Look up kanji outside the game.</div>

        <div class="row" style="margin-top:12px;">
          <button class="btn" id="goDictionaryBtn" type="button">Open dictionary</button>
          <button class="btn" id="goSettingsBtn" type="button">Open settings</button>
          <button class="btn" id="goKanjiBtn" type="button">Pick kanji</button>
        </div>
      </section>

      <!-- SETTINGS -->
      <section class="view" id="viewSettings" aria-labelledby="tabSettings">
        <!-- your existing settings UI -->
        <div class="muted">Settings view…</div>
      </section>

      <!-- KANJI PICKER -->
      <section class="view" id="viewKanji" aria-labelledby="tabKanji">
        <div class="muted">Kanji picker view…</div>
      </section>

      <!-- DICTIONARY -->
      <section class="view" id="viewDictionary" aria-labelledby="tabDictionary">
        <div class="muted">Dictionary view…</div>
      </section>

      <!-- WORD DETAIL -->
      <section class="view" id="viewWord">
        <div class="muted">Word detail view…</div>
      </section>

      <!-- GAME -->
      <section class="view" id="viewGame" aria-labelledby="tabGame">
        <div class="prompt" id="prompt" title="Tap to Sneak Peek">
          <div class="promptHud" aria-hidden="true">
            <div class="promptHudItem" id="hudLives">❤️ 10</div>
            <div class="promptHudItem" id="hudScore">0</div>
          </div>

          <div class="promptInner" id="promptInner">
            <div class="kanjiText">？</div>
          </div>
        </div>

        <div class="choices" id="choices"></div>

        <div class="history">
          <div class="historyHeader">
            <div class="historyTitle">History</div>
            <div class="historyHint">Tap a row to view details (no penalty).</div>
          </div>
          <div id="historyList"></div>
        </div>
      </section>

      <!-- DEBUG -->
      <section class="view" id="viewDebug" aria-labelledby="tabDebug">
        <div class="row">
          <div>
            <div class="sectionTitle">Debug</div>
            <div class="muted">Runtime info to help diagnose loading/caching issues.</div>
          </div>
          <button class="btn" id="debugRefreshBtn" type="button">Refresh</button>
        </div>

        <div class="settingsCard">
          <div class="sectionTitle">Versions</div>
          <div id="debugVersions" class="debugGrid"></div>
        </div>

        <div class="settingsCard">
          <div class="sectionTitle">Totals</div>
          <div id="debugTotals" class="debugGrid"></div>
        </div>

        <div class="settingsCard">
          <div class="sectionTitle">Notes</div>
          <div class="muted" id="debugNotes">
            Images cached count reflects items in <code>kanji-snap-runtime-v1</code> under <code>/images/meaning/cartoon/</code>.
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- Game Over Modal -->
  <div class="overlay" id="overlay">
    <div class="modal">
      <h2 id="gameOverTitle">Game over</h2>
      <p id="gameOverText">Final score: 0</p>
      <div class="actions">
        <button class="btn" id="gameOverOk" type="button">Back to Home</button>
      </div>
    </div>
  </div>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
